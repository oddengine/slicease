<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" dir="ltr" lang="en">
<head>
	<title>Html5 Canvas Test</title>
	
</head>
<body>
	<div id='wrap'>
		<canvas id='canvas1' style='width: 1120px; height: 380px; background: #ccc;'></canvas>
		<canvas id='canvas2' style='width: 1120px; height: 380px; background: #ddd;'></canvas>
	</div>
	
	<script type="text/javaScript">
		var canvas1 = document.getElementById('canvas1');
		canvas1.width = 1120;
		canvas1.height = 380;
		var context1 = canvas1.getContext('2d');
		
		var canvas2 = document.getElementById('canvas2');
		canvas2.width = 1120;
		canvas2.height = 380;
		var context2 = canvas2.getContext('2d');
		
		var cvs = document.createElement('canvas');
		cvs.width = canvas1.width;
		cvs.height = canvas1.height;
		var ctx = cvs.getContext('2d');
		
		var img = new Image();
		img.onload = function() {
			var a = 200 / img.width,
				c = -100 / img.height,
				d = 100 / img.height,
				e = 510,
				f = 140;
			
			// canvas1
			cvs.width = cvs.width;
			ctx.beginPath();
			ctx.moveTo(0, 0);
			ctx.lineTo(0, cvs.height);
			ctx.lineTo(cvs.width, 0);
			ctx.closePath();
			//ctx.stroke();
			ctx.clip();
			
			ctx.setTransform(a, 0, c, d, e, f);
			ctx.drawImage(img, 0, 0, img.width, img.height, 0, 0, img.width, img.height);
			context1.drawImage(cvs, 0, 0, cvs.width, cvs.height, 0, 0, canvas1.width, canvas1.height);
			
			cvs.width = cvs.width;
			ctx.beginPath();
			ctx.moveTo(0, cvs.height);
			ctx.lineTo(cvs.width, 0);
			ctx.lineTo(cvs.width, cvs.height);
			ctx.closePath();
			//ctx.stroke();
			ctx.clip();
			
			ctx.setTransform(a, 0, c, d, e, f);
			ctx.drawImage(img, 0, 0, img.width, img.height, 0, 0, img.width, img.height);
			context1.drawImage(cvs, 0, 0, cvs.width, cvs.height, 0, 0, canvas1.width, canvas1.height);
			
			// canvas2
			cvs.width = cvs.width;
			ctx.beginPath();
			ctx.moveTo(0, 0);
			ctx.lineTo(0, cvs.height);
			ctx.lineTo(cvs.width, 0);
			ctx.closePath();
			//ctx.stroke();
			ctx.clip();
			
			ctx.setTransform(1, 0, 0, 1, 100, 10);
			ctx.drawImage(img, 0, 0, img.width, img.height, 0, 0, img.width, img.height);
			context2.drawImage(cvs, 0, 0, cvs.width, cvs.height, 0, 0, canvas2.width, canvas2.height);
			
			cvs.width = cvs.width;
			ctx.beginPath();
			ctx.moveTo(0, cvs.height);
			ctx.lineTo(cvs.width, 0);
			ctx.lineTo(cvs.width, cvs.height);
			ctx.closePath();
			//ctx.stroke();
			ctx.clip();
			ctx.setTransform(1, 0, 0, 1, 100, 10);
			ctx.drawImage(img, 0, 0, img.width, img.height, 0, 0, img.width, img.height);
			context2.drawImage(cvs, 0, 0, cvs.width, cvs.height, 0, 0, canvas2.width, canvas2.height);
		};
		img.src = 'images/img1.png';
	</script>
</body>
</html>